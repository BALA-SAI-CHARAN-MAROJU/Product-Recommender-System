<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personalized Product Recommender</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script>
        // Enhanced Tailwind Configuration
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        },
                        accent: {
                            50: '#fdf4ff',
                            100: '#fae8ff',
                            200: '#f5d0fe',
                            300: '#f0abfc',
                            400: '#e879f9',
                            500: '#d946ef',
                            600: '#c026d3',
                            700: '#a21caf',
                            800: '#86198f',
                            900: '#701a75',
                        },
                        neon: {
                            blue: '#00f5ff',
                            purple: '#bf00ff',
                            pink: '#ff0080',
                            green: '#00ff88',
                            orange: '#ff8800',
                        },
                        glass: {
                            light: 'rgba(255, 255, 255, 0.1)',
                            medium: 'rgba(255, 255, 255, 0.2)',
                            dark: 'rgba(0, 0, 0, 0.1)',
                        }
                    },
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif'],
                        'mono': ['JetBrains Mono', 'monospace'],
                        'display': ['Playfair Display', 'serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 1s ease-out',
                        'slide-up': 'slideUp 1s ease-out',
                        'slide-down': 'slideDown 1s ease-out',
                        'slide-left': 'slideLeft 1s ease-out',
                        'slide-right': 'slideRight 1s ease-out',
                        'scale-in': 'scaleIn 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)',
                        'rotate-sun': 'rotateSun 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)',
                        'rotate-moon': 'rotateMoon 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)',
                        'float': 'float 8s ease-in-out infinite',
                        'float-slow': 'floatSlow 12s ease-in-out infinite',
                        'glow': 'glow 3s ease-in-out infinite alternate',
                        'pulse-slow': 'pulseSlow 4s ease-in-out infinite',
                        'cursor-pulse': 'cursorPulse 2s ease-in-out infinite',
                        'cursor-trail': 'cursorTrail 0.6s ease-out',
                        'gradient-shift': 'gradientShift 15s ease infinite',
                        'bounce-gentle': 'bounceGentle 2s ease-in-out infinite',
                        'wiggle': 'wiggle 1s ease-in-out infinite',
                        'shimmer': 'shimmer 2s linear infinite',
                        'morph': 'morph 8s ease-in-out infinite',
                        'particle': 'particle 20s linear infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(40px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(60px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        slideDown: {
                            '0%': { transform: 'translateY(-60px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        slideLeft: {
                            '0%': { transform: 'translateX(60px)', opacity: '0' },
                            '100%': { transform: 'translateX(0)', opacity: '1' },
                        },
                        slideRight: {
                            '0%': { transform: 'translateX(-60px)', opacity: '0' },
                            '100%': { transform: 'translateX(0)', opacity: '1' },
                        },
                        scaleIn: {
                            '0%': { transform: 'scale(0.3)', opacity: '0' },
                            '50%': { transform: 'scale(1.05)', opacity: '0.8' },
                            '100%': { transform: 'scale(1)', opacity: '1' },
                        },
                        rotateSun: {
                            '0%': { transform: 'rotate(0deg) scale(0.3)' },
                            '50%': { transform: 'rotate(180deg) scale(1.1)' },
                            '100%': { transform: 'rotate(360deg) scale(1)' },
                        },
                        rotateMoon: {
                            '0%': { transform: 'rotate(0deg) scale(0.3)' },
                            '50%': { transform: 'rotate(-180deg) scale(1.1)' },
                            '100%': { transform: 'rotate(-360deg) scale(1)' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0px) rotate(0deg)' },
                            '33%': { transform: 'translateY(-30px) rotate(1deg)' },
                            '66%': { transform: 'translateY(-15px) rotate(-1deg)' },
                        },
                        floatSlow: {
                            '0%, 100%': { transform: 'translateY(0px) translateX(0px)' },
                            '25%': { transform: 'translateY(-20px) translateX(10px)' },
                            '50%': { transform: 'translateY(-40px) translateX(0px)' },
                            '75%': { transform: 'translateY(-20px) translateX(-10px)' },
                        },
                        glow: {
                            '0%': { boxShadow: '0 0 20px rgba(59, 130, 246, 0.3), 0 0 40px rgba(59, 130, 246, 0.1)' },
                            '100%': { boxShadow: '0 0 40px rgba(59, 130, 246, 0.6), 0 0 80px rgba(59, 130, 246, 0.2)' },
                        },
                        pulseSlow: {
                            '0%, 100%': { transform: 'scale(1)', opacity: '0.7' },
                            '50%': { transform: 'scale(1.05)', opacity: '1' },
                        },
                        cursorPulse: {
                            '0%, 100%': { transform: 'scale(1)', opacity: '0.6' },
                            '50%': { transform: 'scale(1.3)', opacity: '1' },
                        },
                        cursorTrail: {
                            '0%': { transform: 'scale(1)', opacity: '1' },
                            '100%': { transform: 'scale(0)', opacity: '0' },
                        },
                        gradientShift: {
                            '0%, 100%': { backgroundPosition: '0% 50%' },
                            '25%': { backgroundPosition: '100% 0%' },
                            '50%': { backgroundPosition: '100% 100%' },
                            '75%': { backgroundPosition: '0% 100%' },
                        },
                        bounceGentle: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        wiggle: {
                            '0%, 100%': { transform: 'rotate(0deg)' },
                            '25%': { transform: 'rotate(5deg)' },
                            '75%': { transform: 'rotate(-5deg)' },
                        },
                        shimmer: {
                            '0%': { backgroundPosition: '-200% 0' },
                            '100%': { backgroundPosition: '200% 0' },
                        },
                        morph: {
                            '0%, 100%': { borderRadius: '60% 40% 30% 70% / 60% 30% 70% 40%' },
                            '50%': { borderRadius: '30% 60% 70% 40% / 50% 60% 30% 60%' },
                        },
                        particle: {
                            '0%': { transform: 'translateY(100vh) rotate(0deg)', opacity: '0' },
                            '10%': { opacity: '1' },
                            '90%': { opacity: '1' },
                            '100%': { transform: 'translateY(-100vh) rotate(360deg)', opacity: '0' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Advanced Cursor Animations */
        .cursor {
            position: fixed;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: linear-gradient(45deg, #00f5ff, #bf00ff);
            pointer-events: none;
            z-index: 9999;
            mix-blend-mode: difference;
            transition: all 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            animation: cursor-pulse 2s ease-in-out infinite;
            box-shadow: 0 0 20px rgba(0, 245, 255, 0.5);
        }

        .cursor-follower {
            position: fixed;
            width: 32px;
            height: 32px;
            border: 2px solid rgba(0, 245, 255, 0.3);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9998;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            animation: float 6s ease-in-out infinite;
        }

        .cursor-trail {
            position: fixed;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff0080, #00ff88);
            pointer-events: none;
            z-index: 9997;
            animation: cursor-trail 0.6s ease-out forwards;
        }

        .cursor.hover {
            transform: scale(2.5);
            background: linear-gradient(45deg, #ff0080, #ff8800);
            box-shadow: 0 0 30px rgba(255, 0, 128, 0.8);
        }

        .cursor-follower.hover {
            transform: scale(1.8);
            border-color: rgba(255, 0, 128, 0.6);
            border-width: 3px;
        }

        .cursor.click {
            transform: scale(0.8);
            background: linear-gradient(45deg, #00ff88, #00f5ff);
        }

        /* Hide cursor on touch devices */
        @media (hover: none) {
            .cursor, .cursor-follower, .cursor-trail {
                display: none;
            }
        }

        /* Enhanced Body Styles */
        body {
            font-family: 'Inter', sans-serif;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            overflow-x: hidden;
            cursor: none;
        }

        body.dark {
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #533483 100%);
        }

        /* Animated Background Elements */
        .bg-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            overflow: hidden;
        }

        .bg-light,
        .bg-dark {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            transition: opacity 1s ease-in-out;
        }

        .bg-light {
            background-image: url('https://imgs.search.brave.com/Ya5sFnJ9ChfeFJ-V9mdedKy8tS6t5FFotyHSLQmLLdY/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly93YWxs/cGFwZXJhY2Nlc3Mu/Y29tL2Z1bGwvNDQw/NzEzMC5qcGc');
            opacity: 1;
        }

        .bg-dark {
            background-image: url('https://imgs.search.brave.com/mPdBkt8pmRijyOMidxzmirRxfOVse2zYs0CJqGOr-UI/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9jZG4u/d2FsbHBhcGVyc2Fm/YXJpLmNvbS85MC82/MS9SSnVaWEkuanBn');
            opacity: 0;
        }

        body.dark .bg-light {
            opacity: 0;
        }

        body.dark .bg-dark {
            opacity: 1;
        }

        /* Floating Particles */
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: linear-gradient(45deg, #00f5ff, #bf00ff);
            border-radius: 50%;
            animation: particle 20s linear infinite;
            opacity: 0.6;
        }

        .particle:nth-child(odd) {
            background: linear-gradient(45deg, #ff0080, #00ff88);
            animation-duration: 25s;
        }

        .particle:nth-child(3n) {
            background: linear-gradient(45deg, #ff8800, #00f5ff);
            animation-duration: 30s;
        }

        /* Glass Morphism Effects */
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .dark .glass-card {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Enhanced Grid Layout */
        .card-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
            position: relative;
        }

        /* Advanced Loader */
        .loader {
            position: relative;
            width: 60px;
            height: 60px;
        }

        .loader::before,
        .loader::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loader::before {
            width: 100%;
            height: 100%;
            border: 4px solid transparent;
            border-top: 4px solid #00f5ff;
            border-right: 4px solid #bf00ff;
        }

        .loader::after {
            width: 80%;
            height: 80%;
            top: 10%;
            left: 10%;
            border: 3px solid transparent;
            border-bottom: 3px solid #ff0080;
            border-left: 3px solid #00ff88;
            animation-direction: reverse;
            animation-duration: 0.8s;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Enhanced Theme Toggle */
        .theme-toggle {
            position: fixed;
            top: 2rem;
            right: 2rem;
            z-index: 50;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            width: 56px;
            height: 56px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background: linear-gradient(45deg, #667eea, #764ba2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .theme-toggle:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
        }

        .theme-toggle i {
            font-size: 1.5rem;
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            color: white;
        }

        .theme-toggle .fa-sun {
            animation: rotate-sun 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .theme-toggle .fa-moon {
            animation: rotate-moon 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* Enhanced Product Cards */
        .product-card {
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            opacity: 0;
            transform: translateY(40px) scale(0.9);
            position: relative;
            z-index: 1;
            height: 100%;
            background: #fff;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .product-card.show {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        .product-card .shopping-links {
            max-height: 0;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            opacity: 0;
        }

        .product-card:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
            z-index: 50;
        }

        .product-card:hover .shopping-links {
            max-height: 200px;
            opacity: 1;
        }

        .product-card .card-content {
            height: 100%;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(0, 245, 255, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1;
        }

        .product-card:hover::before {
            opacity: 1;
        }

        /* Shimmer Effect */
        .shimmer {
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            background-size: 200% 100%;
            animation: shimmer 2s linear infinite;
        }

        /* Dark Mode Adjustments */
        .dark .loader::before {
            border-top-color: #00f5ff;
            border-right-color: #bf00ff;
        }

        .dark .loader::after {
            border-bottom-color: #ff0080;
            border-left-color: #00ff88;
        }

        .dark .product-card {
            background: #1a1a2e;
            color: white;
        }

        /* Content Wrapper Enhancements */
        .content-wrapper {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            animation: fadeIn 1s ease-out;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .dark .content-wrapper {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Morphing Background Shapes */
        .morph-shape {
            position: absolute;
            border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
            background: linear-gradient(45deg, rgba(0, 245, 255, 0.1), rgba(191, 0, 255, 0.1));
            animation: morph 8s ease-in-out infinite;
            z-index: -1;
        }

        .morph-shape:nth-child(2) {
            animation-delay: -2s;
            background: linear-gradient(45deg, rgba(255, 0, 128, 0.1), rgba(0, 255, 136, 0.1));
        }

        .morph-shape:nth-child(3) {
            animation-delay: -4s;
            background: linear-gradient(45deg, rgba(255, 136, 0, 0.1), rgba(0, 245, 255, 0.1));
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .card-container {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 1.5rem;
            }
            
            .theme-toggle {
                top: 1rem;
                right: 1rem;
                width: 48px;
                height: 48px;
            }
            
            .theme-toggle i {
                font-size: 1.25rem;
            }
        }

        @media (max-width: 480px) {
            .card-container {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
        }
    </style>
</head>
<body class="bg-transparent text-gray-800 dark:text-gray-100">

    <!-- Custom Cursor Elements -->
    <div class="cursor"></div>
    <div class="cursor-follower"></div>

    <!-- Animated Background -->
    <div class="bg-wrapper">
        <div class="bg-light"></div>
        <div class="bg-dark"></div>
        
        <!-- Floating Particles -->
        <div class="particle" style="left: 10%; animation-delay: 0s;"></div>
        <div class="particle" style="left: 20%; animation-delay: 2s;"></div>
        <div class="particle" style="left: 30%; animation-delay: 4s;"></div>
        <div class="particle" style="left: 40%; animation-delay: 6s;"></div>
        <div class="particle" style="left: 50%; animation-delay: 8s;"></div>
        <div class="particle" style="left: 60%; animation-delay: 10s;"></div>
        <div class="particle" style="left: 70%; animation-delay: 12s;"></div>
        <div class="particle" style="left: 80%; animation-delay: 14s;"></div>
        <div class="particle" style="left: 90%; animation-delay: 16s;"></div>
        
        <!-- Morphing Background Shapes -->
        <div class="morph-shape" style="top: 10%; left: 10%; width: 200px; height: 200px;"></div>
        <div class="morph-shape" style="top: 60%; right: 10%; width: 150px; height: 150px;"></div>
        <div class="morph-shape" style="bottom: 20%; left: 20%; width: 100px; height: 100px;"></div>
    </div>

    <!-- Enhanced Theme Toggle -->
    <button id="themeToggle" class="theme-toggle glass-card">
        <i class="fas fa-sun dark:hidden"></i>
        <i class="fas fa-moon hidden dark:block"></i>
    </button>

    <!-- Main Container with New Layout -->
    <div class="min-h-screen flex flex-col">
        <!-- Hero Section -->
        <section class="relative py-20 px-4 md:px-8">
            <div class="container mx-auto max-w-7xl">
                <div class="content-wrapper p-8 md:p-12 mb-16">
                    <header class="text-center mb-16 animate-fade-in">
                        <div class="inline-block mb-6">
                            <h1 class="text-5xl md:text-7xl font-display font-bold bg-gradient-to-r from-neon-blue via-neon-purple to-neon-pink bg-clip-text text-transparent mb-6 animate-scale-in">
                                AI-Powered
                            </h1>
                            <h2 class="text-4xl md:text-6xl font-display font-bold text-gray-900 dark:text-white mb-4 animate-slide-up">
                                Product Recommender
                            </h2>
                        </div>
                        <p class="text-xl md:text-2xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto leading-relaxed animate-slide-up">
                            Discover your next favorite products with our intelligent recommendation system powered by advanced machine learning algorithms.
                        </p>
                        <div class="flex justify-center mt-8 animate-bounce-gentle">
                            <div class="w-16 h-1 bg-gradient-to-r from-neon-blue to-neon-purple rounded-full"></div>
                        </div>
                    </header>

                    <!-- Enhanced Input Section -->
                    <div class="glass-card p-8 md:p-12 rounded-3xl mb-16 animate-slide-up">
                        <div class="max-w-4xl mx-auto">
                            <div class="text-center mb-8">
                                <h3 class="text-2xl md:text-3xl font-bold text-gray-900 dark:text-white mb-4">
                                    Get Personalized Recommendations
                                </h3>
                                <p class="text-gray-600 dark:text-gray-300">
                                    Enter a customer ID to unlock AI-powered product suggestions
                                </p>
                            </div>
                            
                            <div class="flex flex-col lg:flex-row items-center gap-6">
                                <div class="relative w-full lg:flex-1">
                                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                        <i class="fas fa-user text-gray-400 dark:text-gray-500"></i>
                                    </div>
                                    <input type="text" 
                                           id="customerIdInput" 
                                           class="w-full pl-12 pr-4 py-4 text-lg border-2 border-gray-200 dark:border-gray-600 rounded-2xl 
                                                  bg-white/90 dark:bg-gray-800/90 text-gray-900 dark:text-white
                                                  focus:ring-4 focus:ring-neon-blue/30 focus:border-neon-blue 
                                                  transition-all duration-300 placeholder-gray-400 dark:placeholder-gray-500
                                                  hover:border-neon-purple/50" 
                                           placeholder="Enter customer ID...">
                                </div>
                                <button id="getRecsButton" 
                                        class="w-full lg:w-auto bg-gradient-to-r from-neon-blue to-neon-purple text-white font-bold px-12 py-4 
                                               rounded-2xl hover:from-neon-purple hover:to-neon-pink focus:outline-none focus:ring-4 
                                               focus:ring-neon-blue/30 transition-all duration-300 transform hover:scale-105 
                                               active:scale-95 shadow-lg hover:shadow-xl animate-glow">
                                    <i class="fas fa-magic mr-2"></i>
                                    Get Recommendations
                                </button>
                            </div>
                            
                            <!-- Sample Customer IDs -->
                            <div id="sampleCustomers" class="mt-8 text-center">
                                <p class="text-sm text-gray-500 dark:text-gray-400 mb-4">
                                    <i class="fas fa-lightbulb mr-2"></i>
                                    Don't have an ID? Try these sample customers:
                                </p>
                                <div class="flex flex-wrap justify-center gap-3">
                                    <button class="sample-id-btn glass-card hover:bg-neon-blue/20 hover:text-neon-blue 
                                                 dark:hover:bg-neon-purple/20 dark:hover:text-neon-purple px-4 py-2 rounded-xl 
                                                 transition-all duration-300 transform hover:scale-105" 
                                            data-full-id="5aafadc16529cc7d272b35571af76f184188d3e12fb9f4433f94315ebb4dc095">
                                        <i class="fas fa-user-circle mr-2"></i>
                                        5aafadc16529...
                                    </button>
                                    <button class="sample-id-btn glass-card hover:bg-neon-blue/20 hover:text-neon-blue 
                                                 dark:hover:bg-neon-purple/20 dark:hover:text-neon-purple px-4 py-2 rounded-xl 
                                                 transition-all duration-300 transform hover:scale-105" 
                                            data-full-id="00006413d8573cd20ed7128e53b7b13819fe5cfc2d801f3fc43a6932f4e5559d">
                                        <i class="fas fa-user-circle mr-2"></i>
                                        00006413d8...
                                    </button>
                                    <button class="sample-id-btn glass-card hover:bg-neon-blue/20 hover:text-neon-blue 
                                                 dark:hover:bg-neon-purple/20 dark:hover:text-neon-purple px-4 py-2 rounded-xl 
                                                 transition-all duration-300 transform hover:scale-105" 
                                            data-full-id="0001d44dbe7f6c4b35d93641d805be95dfd0c941373e3562b6f3a09a52980682">
                                        <i class="fas fa-user-circle mr-2"></i>
                                        0001d44dbe...
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section id="resultsSection" class="hidden flex-1 px-4 md:px-8 pb-20">
            <div class="container mx-auto max-w-7xl">
                <div class="content-wrapper p-8 md:p-12">
                    <!-- Enhanced Loader -->
                    <div id="loader" class="flex flex-col justify-center items-center py-20 hidden">
                        <div class="loader mb-6"></div>
                        <p class="text-lg text-gray-600 dark:text-gray-300 animate-pulse">
                            Analyzing preferences and generating recommendations...
                        </p>
                    </div>

                    <!-- Enhanced Error Message -->
                    <div id="errorMessage" class="hidden glass-card border-2 border-red-400 dark:border-red-600 
                                                text-red-700 dark:text-red-300 px-8 py-6 rounded-2xl mb-8 animate-slide-down" role="alert">
                        <div class="flex items-center">
                            <i class="fas fa-exclamation-triangle text-2xl mr-4"></i>
                            <div>
                                <strong class="font-bold text-xl">Error: </strong>
                                <span class="block sm:inline text-lg" id="errorText"></span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Enhanced Last Purchase Info -->
                    <div id="lastPurchaseInfo" class="hidden mb-16 animate-fade-in">
                        <div class="text-center mb-8">
                            <h2 class="text-3xl md:text-4xl font-display font-bold text-gray-800 dark:text-gray-200 mb-4">
                                Based on your last purchase
                            </h2>
                            <div class="w-24 h-1 bg-gradient-to-r from-neon-blue to-neon-purple rounded-full mx-auto"></div>
                        </div>
                        <div class="glass-card p-8 rounded-3xl flex flex-col md:flex-row items-center gap-8 
                                    transform transition-all duration-300 hover:shadow-2xl backdrop-blur-md">
                            <div class="relative">
                                <img id="lastPurchaseImg" src="" alt="Last Purchased Product" 
                                     class="w-32 h-40 md:w-40 md:h-48 object-cover rounded-2xl shadow-lg">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent rounded-2xl"></div>
                            </div>
                            <div class="flex-1 text-center md:text-left">
                                <h3 id="lastPurchaseName" class="font-bold text-2xl md:text-3xl mb-3 text-gray-900 dark:text-white"></h3>
                                <p id="lastPurchaseType" class="text-lg text-gray-600 dark:text-gray-300 mb-2"></p>
                                <p id="lastPurchaseId" class="text-sm text-gray-400 dark:text-gray-500 font-mono"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Enhanced Recommendations -->
                    <div id="recommendationsContainer" class="hidden animate-fade-in">
                        <div class="text-center mb-12">
                            <h2 class="text-3xl md:text-4xl font-display font-bold text-gray-800 dark:text-gray-200 mb-4">
                                We think you'll love these
                            </h2>
                            <p class="text-lg text-gray-600 dark:text-gray-300 mb-6">
                                Carefully selected based on your preferences and similar customers
                            </p>
                            <div class="w-24 h-1 bg-gradient-to-r from-neon-purple to-neon-pink rounded-full mx-auto"></div>
                        </div>
                        <div id="recommendationsGrid" class="card-container">
                            <!-- Cards will be dynamically inserted here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Enhanced Footer -->
    <footer class="glass-card text-center py-8 mt-auto">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row items-center justify-between max-w-6xl mx-auto">
                <div class="mb-4 md:mb-0">
                    <p class="text-gray-600 dark:text-gray-400">
                        &copy; 2025 AI Product Recommender System. Powered by Machine Learning.
                    </p>
                </div>
                <div class="flex space-x-6">
                    <a href="#" class="text-gray-400 hover:text-neon-blue transition-colors duration-300">
                        <i class="fab fa-github text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-neon-purple transition-colors duration-300">
                        <i class="fab fa-linkedin text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-neon-pink transition-colors duration-300">
                        <i class="fab fa-twitter text-xl"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Enhanced Cursor Animation System
        class CursorAnimation {
            constructor() {
                this.cursor = document.querySelector('.cursor');
                this.cursorFollower = document.querySelector('.cursor-follower');
                this.trail = [];
                this.maxTrailLength = 20;
                this.isHovering = false;
                this.init();
            }

            init() {
                if (window.matchMedia('(hover: none)').matches) return;
                
                this.bindEvents();
                this.createTrail();
            }

            bindEvents() {
                document.addEventListener('mousemove', (e) => this.updateCursor(e));
                document.addEventListener('mouseenter', () => this.showCursor());
                document.addEventListener('mouseleave', () => this.hideCursor());
                document.addEventListener('mousedown', () => this.cursorClick());
                document.addEventListener('mouseup', () => this.cursorRelease());
                
                // Hover effects for interactive elements
                const hoverElements = document.querySelectorAll('button, a, input, .product-card, .sample-id-btn');
                hoverElements.forEach(el => {
                    el.addEventListener('mouseenter', () => this.cursorHover());
                    el.addEventListener('mouseleave', () => this.cursorUnhover());
                });
            }

            updateCursor(e) {
                if (!this.cursor || !this.cursorFollower) return;
                
                const x = e.clientX;
                const y = e.clientY;
                
                // Update main cursor
                this.cursor.style.left = x + 'px';
                this.cursor.style.top = y + 'px';
                
                // Update follower with delay
                setTimeout(() => {
                    this.cursorFollower.style.left = x + 'px';
                    this.cursorFollower.style.top = y + 'px';
                }, 50);
                
                // Create trail effect
                this.createTrailDot(x, y);
            }

            createTrailDot(x, y) {
                const dot = document.createElement('div');
                dot.className = 'cursor-trail';
                dot.style.left = x + 'px';
                dot.style.top = y + 'px';
                document.body.appendChild(dot);
                
                this.trail.push(dot);
                if (this.trail.length > this.maxTrailLength) {
                    const oldDot = this.trail.shift();
                    if (oldDot && oldDot.parentNode) {
                        oldDot.parentNode.removeChild(oldDot);
                    }
                }
                
                setTimeout(() => {
                    if (dot.parentNode) {
                        dot.parentNode.removeChild(dot);
                    }
                }, 600);
            }

            createTrail() {
                // Pre-create trail elements for better performance
                for (let i = 0; i < this.maxTrailLength; i++) {
                    const dot = document.createElement('div');
                    dot.className = 'cursor-trail';
                    dot.style.display = 'none';
                    document.body.appendChild(dot);
                }
            }

            showCursor() {
                if (this.cursor) this.cursor.style.opacity = '1';
                if (this.cursorFollower) this.cursorFollower.style.opacity = '1';
            }

            hideCursor() {
                if (this.cursor) this.cursor.style.opacity = '0';
                if (this.cursorFollower) this.cursorFollower.style.opacity = '0';
            }

            cursorHover() {
                this.isHovering = true;
                if (this.cursor) this.cursor.classList.add('hover');
                if (this.cursorFollower) this.cursorFollower.classList.add('hover');
            }

            cursorUnhover() {
                this.isHovering = false;
                if (this.cursor) this.cursor.classList.remove('hover');
                if (this.cursorFollower) this.cursorFollower.classList.remove('hover');
            }

            cursorClick() {
                if (this.cursor) this.cursor.classList.add('click');
            }

            cursorRelease() {
                if (this.cursor) this.cursor.classList.remove('click');
            }
        }

        // Initialize cursor animations
        const cursorAnimation = new CursorAnimation();

        // Enhanced Theme Toggle Functionality
        const themeToggle = document.getElementById('themeToggle');
        
        // Check for saved theme preference or default to light
        if (localStorage.theme === 'dark' || 
            (!('theme' in localStorage) && 
             window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
            document.body.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
            document.body.classList.remove('dark');
        }

        // --- DOM Elements ---
        const customerIdInput = document.getElementById('customerIdInput');
        const getRecsButton = document.getElementById('getRecsButton');
        const resultsSection = document.getElementById('resultsSection');
        const loader = document.getElementById('loader');
        const errorMessage = document.getElementById('errorMessage');
        const errorText = document.getElementById('errorText');
        const lastPurchaseInfo = document.getElementById('lastPurchaseInfo');
        const recommendationsContainer = document.getElementById('recommendationsContainer');
        const recommendationsGrid = document.getElementById('recommendationsGrid');
        
        const API_URL = 'http://127.0.0.1:5000/recommend';

        // --- Event Listeners ---
        getRecsButton.addEventListener('click', handleRecommendationRequest);
        customerIdInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleRecommendationRequest();
            }
        });

        document.querySelectorAll('.sample-id-btn').forEach(button => {
            button.addEventListener('click', (e) => {
                const fullId = e.target.dataset.fullId;
                if (fullId) {
                    customerIdInput.value = fullId;
                    handleRecommendationRequest();
                }
            });
        });

        // --- Functions ---
        async function handleRecommendationRequest() {
            const customerId = customerIdInput.value.trim();
            if (!customerId) {
                showError("Please enter a customer ID.");
                return;
            }

            resultsSection.classList.remove('hidden');
            loader.classList.remove('hidden');
            errorMessage.classList.add('hidden');
            lastPurchaseInfo.classList.add('hidden');
            recommendationsContainer.classList.add('hidden');
            
            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ customer_id: customerId })
                });

                loader.classList.add('hidden');

                if (!response.ok) {
                    const errorData = await response.json();
                    showError(errorData.error || `Error: ${response.status} ${response.statusText}`);
                    return;
                }

                const data = await response.json();
                displayResults(data.last_purchase, data.recommendations);

            } catch (error) {
                loader.classList.add('hidden');
                console.error('Error fetching recommendations:', error);
                showError("Failed to connect to the recommendation service. Please try again later.");
            }
        }

        function showError(message) {
            errorText.textContent = message;
            errorMessage.classList.remove('hidden');
            lastPurchaseInfo.classList.add('hidden');
            recommendationsContainer.classList.add('hidden');
        }

        // Enhanced displayResults function with staggered animations and new design
        function displayResults(lastPurchase, recommendations) {
            // Display last purchase with enhanced styling
            if (lastPurchase) {
                document.getElementById('lastPurchaseImg').src = 
                    `https://placehold.co/400x480/e2e8f0/4a5568?text=${encodeURIComponent(lastPurchase.prod_name || 'Product')}`;
                document.getElementById('lastPurchaseName').textContent = lastPurchase.prod_name;
                document.getElementById('lastPurchaseType').textContent = lastPurchase.product_type_name;
                document.getElementById('lastPurchaseId').textContent = `ID: ${lastPurchase.article_id}`;
                lastPurchaseInfo.classList.remove('hidden');
                lastPurchaseInfo.classList.add('animate-fade-in');
            } else {
                lastPurchaseInfo.classList.add('hidden');
            }

            // Display recommendations with enhanced staggered animations
            recommendationsGrid.innerHTML = '';
            if (recommendations && recommendations.length > 0) {
                recommendations.forEach((article, index) => {
                    const card = document.createElement('div');
                    card.className = 'product-card glass-card rounded-2xl shadow-lg overflow-hidden';
                    card.style.transitionDelay = `${index * 150}ms`;
                    
                    // Create search-friendly product type name
                    const searchProductType = encodeURIComponent(article.product_type_name.replace(/[^\w\s]/gi, ''));
                    
                    card.innerHTML = `
                        <div class="card-content relative">
                            <div class="relative overflow-hidden">
                                <img src="https://placehold.co/400x480/e2e8f0/4a5568?text=${encodeURIComponent(article.prod_name || 'Product')}" 
                                     alt="${article.prod_name}" 
                                     class="w-full h-56 object-cover transition-transform duration-500 hover:scale-110">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"></div>
                                <div class="absolute top-4 right-4 opacity-0 hover:opacity-100 transition-opacity duration-300">
                                    <div class="bg-white/90 dark:bg-gray-800/90 rounded-full p-2 shadow-lg">
                                        <i class="fas fa-heart text-red-500"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="p-6 flex-grow flex flex-col">
                                <h3 class="font-bold text-lg text-gray-900 dark:text-white mb-2 line-clamp-2">
                                    ${article.prod_name}
                                </h3>
                                <p class="text-gray-600 dark:text-gray-300 text-sm mb-3 flex items-center">
                                    <i class="fas fa-tag mr-2 text-neon-blue"></i>
                                    ${article.product_type_name}
                                </p>
                                <p class="text-xs text-gray-400 dark:text-gray-500 mb-4 font-mono">
                                    ID: ${article.article_id}
                                </p>
                                <div class="shopping-links mt-auto space-y-3">
                                    <a href="https://www.amazon.com/s?k=${searchProductType}" 
                                       target="_blank" 
                                       class="flex items-center justify-center px-4 py-3 bg-gradient-to-r from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-600 text-black font-semibold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg">
                                       <i class="fab fa-amazon mr-2"></i> View on Amazon
                                    </a>
                                    <a href="https://www.flipkart.com/search?q=${searchProductType}" 
                                       target="_blank" 
                                       class="flex items-center justify-center px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg">
                                       <i class="fas fa-shopping-cart mr-2"></i> Check on Flipkart
                                    </a>
                                </div>
                            </div>
                        </div>
                    `;
                    recommendationsGrid.appendChild(card);
                    
                    // Enhanced animation trigger with stagger effect
                    setTimeout(() => {
                        card.classList.add('show');
                    }, 100 + (index * 100));
                });
                recommendationsContainer.classList.remove('hidden');
                recommendationsContainer.classList.add('animate-fade-in');
            } else {
                recommendationsContainer.classList.add('hidden');
            }
        }


        // Enhanced theme toggle animation
        themeToggle.addEventListener('click', () => {
            const sunIcon = themeToggle.querySelector('.fa-sun');
            const moonIcon = themeToggle.querySelector('.fa-moon');
            
            document.documentElement.classList.toggle('dark');
            document.body.classList.toggle('dark'); // Add this line to toggle dark class on body
            localStorage.theme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
            
            // Reset and trigger animations
            if (localStorage.theme === 'dark') {
                moonIcon.style.animation = 'none';
                setTimeout(() => {
                    moonIcon.style.animation = 'rotateMoon 0.5s ease-out';
                }, 10);
            } else {
                sunIcon.style.animation = 'none';
                setTimeout(() => {
                    sunIcon.style.animation = 'rotateSun 0.5s ease-out';
                }, 10);
            }
        });
    </script>
</body>
</html>